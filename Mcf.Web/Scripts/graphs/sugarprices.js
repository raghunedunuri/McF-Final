var data = [{ "values": [{ "x": 1266697200, "y": 4.0 }, { "x": 1269375600, "y": 0 }, { "x": 1272054000, "y": 3.0 }, { "x": 1274732400, "y": 0.0 }, { "x": 1277410800, "y": 4.0 }, { "x": 1280089200, "y": 5.0 }, { "x": 1282767600, "y": 2.0 }, { "x": 1285446000, "y": 2.0 }, { "x": 1288124400, "y": 4.0 }, { "x": 1290802800, "y": 3.0 }, { "x": 1293481200, "y": 5.0 }, { "x": 1296159600, "y": 3.0 }, { "x": 1298838000, "y": 2.0 }, { "x": 1301516400, "y": 3.0 }, { "x": 1304194800, "y": 5.0 }, { "x": 1306873200, "y": 0.0 }, { "x": 1309551600, "y": 3.0 }, { "x": 1312230000, "y": 3.0 }, { "x": 1314908400, "y": 1.0 }, { "x": 1317586800, "y": 3.0 }, { "x": 1320265200, "y": 2.0 }, { "x": 1322943600, "y": 2.0 }, { "x": 1325622000, "y": 3.0 }, { "x": 1328300400, "y": 2.0 }, { "x": 1330978800, "y": 2.0 }, { "x": 1333657200, "y": 11.0 }, { "x": 1336335600, "y": 12.0 }, { "x": 1339014000, "y": 11.0 }, { "x": 1341692400, "y": 11.0 }, { "x": 1344370800, "y": 10.0 }, { "x": 1347049200, "y": 7.0 }, { "x": 1349727600, "y": 9.0 }, { "x": 1352406000, "y": 12.0 }, { "x": 1355084400, "y": 9.0 }, { "x": 1357762800, "y": 11.0 }, { "x": 1360441200, "y": 8.0 }, { "x": 1363119600, "y": 3.0 }, { "x": 1365798000, "y": 7.0 }, { "x": 1368476400, "y": 6.0 }, { "x": 1371154800, "y": 8.0 }, { "x": 1373833200, "y": 8.0 }, { "x": 1376511600, "y": 3.0 }, { "x": 1379190000, "y": 7.0 }, { "x": 1381868400, "y": 6.0 }, { "x": 1384546800, "y": 10.0 }, { "x": 1387225200, "y": 6.0 }, { "x": 1389903600, "y": 5.0 }, { "x": 1392582000, "y": 4.0 }, { "x": 1395260400, "y": 4.0 }, { "x": 1397938800, "y": 3.0 }, { "x": 1400617200, "y": 3.0 }, { "x": 1403295600, "y": 4.0 }, { "x": 1405974000, "y": 6.0 }, { "x": 1408652400, "y": 7.0 }, { "x": 1411330800, "y": 9.0 }, { "x": 1414009200, "y": 9.0 }, { "x": 1416687600, "y": 10.0 }, { "x": 1419366000, "y": 9.0 }, { "x": 1422044400, "y": 9.0 }, { "x": 1424722800, "y": 8.0 }, { "x": 1427401200, "y": 10.0 }, { "x": 1430079600, "y": 9.0 }, { "x": 1432758000, "y": 9.0 }, { "x": 1435436400, "y": 10.0 }, { "x": 1438114800, "y": 5.0 }, { "x": 1440793200, "y": 7.0 }, { "x": 1443471600, "y": 9.0 }, { "x": 1446150000, "y": 6.0 }, { "x": 1448828400, "y": 3.0 }, { "x": 1451506800, "y": 12.0 }, { "x": 1454185200, "y": 6.0 }, { "x": 1456863600, "y": 5.0 }, { "x": 1459542000, "y": 3.0 }, { "x": 1462220400, "y": 18.0 }, { "x": 1464898800, "y": 13.0 }, { "x": 1467577200, "y": 16.0 }, { "x": 1470255600, "y": 14.0 }, { "x": 1472934000, "y": 17.0 }, { "x": 1475612400, "y": 8.0 }, { "x": 1478290800, "y": 3.0 }, { "x": 1480969200, "y": 18.0 }, { "x": 1483647600, "y": 13.0 }, { "x": 1486326000, "y": 6.0 }, { "x": 1489004400, "y": 8.0 }, { "x": 1491682800, "y": 17.0 }, { "x": 1494361200, "y": 4.0 }, { "x": 1497039600, "y": 19.0 }, { "x": 1499718000, "y": 11.0 }, { "x": 1502396400, "y": 15.0 }, { "x": 1505074800, "y": 9.0 }, { "x": 1507753200, "y": 17.0 }, { "x": 1510431600, "y": 8.0 }, { "x": 1513110000, "y": 11.0 }, { "x": 1515788400, "y": 11.0 }, { "x": 1518466800, "y": 10.0 }, { "x": 1521145200, "y": 5.0 }, { "x": 1523823600, "y": 4.0 }, { "x": 1526502000, "y": 10.0 }, { "x": 1529180400, "y": 3.0 }, { "x": 1531858800, "y": 7.0 }], "type": "Spread" }, { "values": [{ "x": 1266697200, "y": 19.0 }, { "x": 1269375600, "y": 19.0 }, { "x": 1272054000, "y": 18.0 }, { "x": 1274732400, "y": 21.0 }, { "x": 1277410800, "y": 21.0 }, { "x": 1280089200, "y": 21.0 }, { "x": 1282767600, "y": 20.0 }, { "x": 1285446000, "y": 21.0 }, { "x": 1288124400, "y": 18.0 }, { "x": 1290802800, "y": 21.0 }, { "x": 1293481200, "y": 21.0 }, { "x": 1296159600, "y": 20.0 }, { "x": 1298838000, "y": 19.0 }, { "x": 1301516400, "y": 20.0 }, { "x": 1304194800, "y": 20.0 }, { "x": 1306873200, "y": 19.0 }, { "x": 1309551600, "y": 18.0 }, { "x": 1312230000, "y": 18.0 }, { "x": 1314908400, "y": 19.0 }, { "x": 1317586800, "y": 18.0 }, { "x": 1320265200, "y": 21.0 }, { "x": 1322943600, "y": 18.0 }, { "x": 1325622000, "y": 21.0 }, { "x": 1328300400, "y": 21.0 }, { "x": 1330978800, "y": 20.0 }, { "x": 1333657200, "y": 20.0 }, { "x": 1336335600, "y": 18.0 }, { "x": 1339014000, "y": 19.0 }, { "x": 1341692400, "y": 19.0 }, { "x": 1344370800, "y": 20.0 }, { "x": 1347049200, "y": 21.0 }, { "x": 1349727600, "y": 19.0 }, { "x": 1352406000, "y": 19.0 }, { "x": 1355084400, "y": 21.0 }, { "x": 1357762800, "y": 21.0 }, { "x": 1360441200, "y": 19.0 }, { "x": 1363119600, "y": 18.0 }, { "x": 1365798000, "y": 18.0 }, { "x": 1368476400, "y": 18.0 }, { "x": 1371154800, "y": 21.0 }, { "x": 1373833200, "y": 20.0 }, { "x": 1376511600, "y": 20.0 }, { "x": 1379190000, "y": 18.0 }, { "x": 1381868400, "y": 20.0 }, { "x": 1384546800, "y": 18.0 }, { "x": 1387225200, "y": 21.0 }, { "x": 1389903600, "y": 18.0 }, { "x": 1392582000, "y": 19.0 }, { "x": 1395260400, "y": 20.0 }, { "x": 1397938800, "y": 21.0 }, { "x": 1400617200, "y": 25.0 }, { "x": 1403295600, "y": 27.0 }, { "x": 1405974000, "y": 32.0 }, { "x": 1408652400, "y": 39.0 }, { "x": 1411330800, "y": 37.0 }, { "x": 1414009200, "y": 33.0 }, { "x": 1416687600, "y": 23.0 }, { "x": 1419366000, "y": 39.0 }, { "x": 1422044400, "y": 25.0 }, { "x": 1424722800, "y": 27.0 }, { "x": 1427401200, "y": 23.0 }, { "x": 1430079600, "y": 27.0 }, { "x": 1432758000, "y": 39.0 }, { "x": 1435436400, "y": 22.0 }, { "x": 1438114800, "y": 21.0 }, { "x": 1440793200, "y": 20.0 }, { "x": 1443471600, "y": 25.0 }, { "x": 1446150000, "y": 23.0 }, { "x": 1448828400, "y": 25.0 }, { "x": 1451506800, "y": 25.0 }, { "x": 1454185200, "y": 23.0 }, { "x": 1456863600, "y": 24.0 }, { "x": 1459542000, "y": 22.0 }, { "x": 1462220400, "y": 21.0 }, { "x": 1464898800, "y": 22.0 }, { "x": 1467577200, "y": 26.0 }, { "x": 1470255600, "y": 20.0 }, { "x": 1472934000, "y": 20.0 }, { "x": 1475612400, "y": 20.0 }, { "x": 1478290800, "y": 20.0 }, { "x": 1480969200, "y": 21.0 }, { "x": 1483647600, "y": 20.0 }, { "x": 1486326000, "y": 20.0 }, { "x": 1489004400, "y": 21.0 }, { "x": 1491682800, "y": 20.0 }, { "x": 1494361200, "y": 21.0 }, { "x": 1497039600, "y": 21.0 }, { "x": 1499718000, "y": 20.0 }, { "x": 1502396400, "y": 20.0 }, { "x": 1505074800, "y": 20.0 }, { "x": 1507753200, "y": 21.0 }, { "x": 1510431600, "y": 20.0 }, { "x": 1513110000, "y": 20.0 }, { "x": 1515788400, "y": 21.0 }, { "x": 1518466800, "y": 25.0 }, { "x": 1521145200, "y": 24.0 }, { "x": 1523823600, "y": 22.0 }, { "x": 1526502000, "y": 23.0 }, { "x": 1529180400, "y": 22.0 }, { "x": 1531858800, "y": 21.0 }], "type": "Refined" }, { "values": [{ "x": 1266697200, "y": 20.0 }, { "x": 1269375600, "y": 21.0 }, { "x": 1272054000, "y": 20.0 }, { "x": 1274732400, "y": 20.0 }, { "x": 1277410800, "y": 20.0 }, { "x": 1280089200, "y": 20.0 }, { "x": 1282767600, "y": 7.0 }, { "x": 1285446000, "y": 8.0 }, { "x": 1288124400, "y": 20.0 }, { "x": 1290802800, "y": 21.0 }, { "x": 1293481200, "y": 20.0 }, { "x": 1296159600, "y": 20.0 }, { "x": 1298838000, "y": 20.0 }, { "x": 1301516400, "y": 21.0 }, { "x": 1304194800, "y": 21.0 }, { "x": 1306873200, "y": 21.0 }, { "x": 1309551600, "y": 20.0 }, { "x": 1312230000, "y": 21.0 }, { "x": 1314908400, "y": 20.0 }, { "x": 1317586800, "y": 20.0 }, { "x": 1320265200, "y": 21.0 }, { "x": 1322943600, "y": 21.0 }, { "x": 1325622000, "y": 21.0 }, { "x": 1328300400, "y": 21.0 }, { "x": 1330978800, "y": 21.0 }, { "x": 1333657200, "y": 20.0 }, { "x": 1336335600, "y": 22.0 }, { "x": 1339014000, "y": 20.0 }, { "x": 1341692400, "y": 28.0 }, { "x": 1344370800, "y": 23.0 }, { "x": 1347049200, "y": 38.0 }, { "x": 1349727600, "y": 38.0 }, { "x": 1352406000, "y": 38.0 }, { "x": 1355084400, "y": 35.0 }, { "x": 1357762800, "y": 21.0 }, { "x": 1360441200, "y": 28.0 }, { "x": 1363119600, "y": 28.0 }, { "x": 1365798000, "y": 32.0 }, { "x": 1368476400, "y": 40.0 }, { "x": 1371154800, "y": 31.0 }, { "x": 1373833200, "y": 46.0 }, { "x": 1376511600, "y": 31.0 }, { "x": 1379190000, "y": 44.0 }, { "x": 1381868400, "y": 32.0 }, { "x": 1384546800, "y": 42.0 }, { "x": 1387225200, "y": 37.0 }, { "x": 1389903600, "y": 47.0 }, { "x": 1392582000, "y": 43.0 }, { "x": 1395260400, "y": 55.0 }, { "x": 1397938800, "y": 57.0 }, { "x": 1400617200, "y": 48.0 }, { "x": 1403295600, "y": 58.0 }, { "x": 1405974000, "y": 52.0 }, { "x": 1408652400, "y": 42.0 }, { "x": 1411330800, "y": 42.0 }, { "x": 1414009200, "y": 60.0 }, { "x": 1416687600, "y": 56.0 }, { "x": 1419366000, "y": 55.0 }, { "x": 1422044400, "y": 51.0 }, { "x": 1424722800, "y": 55.0 }, { "x": 1427401200, "y": 57.0 }, { "x": 1430079600, "y": 58.0 }, { "x": 1432758000, "y": 47.0 }, { "x": 1435436400, "y": 37.0 }, { "x": 1438114800, "y": 56.0 }, { "x": 1440793200, "y": 46.0 }, { "x": 1443471600, "y": 50.0 }, { "x": 1446150000, "y": 43.0 }, { "x": 1448828400, "y": 30.0 }, { "x": 1451506800, "y": 46.0 }, { "x": 1454185200, "y": 51.0 }, { "x": 1456863600, "y": 34.0 }, { "x": 1459542000, "y": 51.0 }, { "x": 1462220400, "y": 36.0 }, { "x": 1464898800, "y": 27.0 }, { "x": 1467577200, "y": 40.0 }, { "x": 1470255600, "y": 31.0 }, { "x": 1472934000, "y": 30.0 }, { "x": 1475612400, "y": 30.0 }, { "x": 1478290800, "y": 34.0 }, { "x": 1480969200, "y": 35.0 }, { "x": 1483647600, "y": 29.0 }, { "x": 1486326000, "y": 38.0 }, { "x": 1489004400, "y": 37.0 }, { "x": 1491682800, "y": 37.0 }, { "x": 1494361200, "y": 37.0 }, { "x": 1497039600, "y": 30.0 }, { "x": 1499718000, "y": 33.0 }, { "x": 1502396400, "y": 33.0 }, { "x": 1505074800, "y": 30.0 }, { "x": 1507753200, "y": 28.0 }, { "x": 1510431600, "y": 27.0 }, { "x": 1513110000, "y": 24.0 }, { "x": 1515788400, "y": 22.0 }, { "x": 1518466800, "y": 23.0 }, { "x": 1521145200, "y": 24.0 }, { "x": 1523823600, "y": 27.0 }, { "x": 1526502000, "y": 28.0 }, { "x": 1529180400, "y": 29.0 }, { "x": 1531858800, "y": 30.0 }], "type": "#16Price" }];
var _chart;
$(document).ready(function () {

    $.each(data, function (inde, item) {
        $.each(item.values, function (index, item) {
            if (item.comment) {
                item.marker = {
                    fillColor: '#FFFF00',
                    lineColor: '#d23928',
                    lineWidth: 2,
                    radius: 8
                };
            }
        });
    });

    function updateChart() {
        _chart = Highcharts.chart('mapcontainer', {
            chart: {
                type: 'spline',
            },
            title: {
                text: 'U.S. refined & raw sugar prices',
                style: {
                    color: '#8B3910',
                    fontSize: '36px',
                    fontWeight: 'normal',
                    fontFamily: 'Cordia New'
                }
            },
            xAxis: {
                type: 'datetime',
                labels: {
                    overflow: 'justify'
                }
            },
            yAxis: {
                title: {
                    text: 'Cents per pound',
                    style: {
                        color: '#8B3910',
                        fontSize: '24px',
                        fontFamily: 'Cordia New'
                    }
                },
            },
            tooltip: {
                formatter: function () {
                    var comment = (this.point.comment) ? '<b>' + this.point.comment + '</b>' : '';
                    return '<b>' + this.x + '</b><br/>' +
                        this.series.name + ': ' + this.y + '<br/>' + comment;
                }
            },
            legend: {
                symbolWidth: 20,
                itemStyle: {
                    color: '#000000',
                    fontWeight: 'normal',
                    fontSize: '13px'
                }
            },
            plotOptions: {
                spline: {
                    lineWidth: 4,
                    states: {
                        hover: {
                            lineWidth: 5
                        }
                    },
                    marker: {
                        enabled: true,
                        lineWidth: 0,
                        radius: 0
                    }
                },
                area: {
                    lineWidth: 1,
                    states: {
                        hover: {
                            lineWidth: 2
                        }
                    },
                    marker: {
                        enabled: true,
                        lineWidth: 0,
                        radius: 0
                    }
                }
            },
            series: [{
                id: '_1',
                name: 'Spread',
                data: data[0].values,
                type: 'area',
                color: '#98A05F'
            }, {
                id: '_2',
                name: 'Refined Beet Price FOB',
                data: data[1].values,
                color: '#285E1E'
            }, {
                id: '_3',
                name: '#16 Price',
                data: data[2].values,
                color: '#E4851D'
            }]
        });
    }

    $('#_comment').change(function () {
        var enabled = this.checked;
        _chart.update({
            plotOptions: {
                area: {
                    marker: {
                        enabled: enabled
                    }
                }
            }
        });
    });

    updateChart();
});